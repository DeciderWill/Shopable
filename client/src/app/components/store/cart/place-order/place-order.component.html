<app-navbar
  title="Checkout"
  [user]="user"
  [showBackButton]="true"
  userType="CUSTOMER"
  backRoute="/store/{{ shopUniqueName }}/cart"
  [shopUniqueName]="shopUniqueName"
>
</app-navbar>

<div class="p-4">
  <div *ngFor="let product of cart.items" class="m-1">
    <mat-card (click)="viewProduct(product)" matRipple class="clickable">
      <mat-card-content>
        <div class="flex justify-between">
          <div>
            <p class="font-bold text-lg m-0">
              {{ product.productName }}
            </p>
            <p class="font-bold text-xs m-0">{{ product.productCategory }}</p>
            <p class="text-sm m-0">
              {{ product.price | currency: "INR" }} x {{ product.quantity }}
            </p>
          </div>
          <div class="flex justify-center items-center">
            <p class="font-bold text-green-500 text-lg m-0">
              {{ product.totalPrice | currency: "INR" }}
            </p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="flex justify-between p-2">
    <p class="font-bold text-xl m-0">Total:</p>
    <div class="flex text-end items-center">
      <p class="font-bold text-green-500 text-2xl m-0">
        {{ cart.totalPrice | currency: "INR" }}
      </p>
    </div>
  </div>
</div>

<div class="p-4 text-center bg-pink-500">
  <mat-card class="w-1/2 mx-auto">
    <mat-card-content>
      <form [formGroup]="orderForm">
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Email</mat-label>
          <input
            type="email"
            matInput
            placeholder="pat@example.com"
            formControlName="email"
            required
          />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Address</mat-label>
          <input matInput formControlName="address" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>State</mat-label>
          <input matInput formControlName="state" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Zip Code</mat-label>
          <input matInput formControlName="zip" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Country</mat-label>
          <input matInput formControlName="country" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Phone Number</mat-label>
          <input type="tel" matInput formControlName="phoneNumber" required />
        </mat-form-field>
      </form>
    </mat-card-content>
  </mat-card>
</div>

<div class="flex justify-center p-4">
  <button
    [disabled]="orderForm.invalid"
    color="accent"
    mat-raised-button
    (click)="placeOrder()"
  >
    Place Order
  </button>
</div>
