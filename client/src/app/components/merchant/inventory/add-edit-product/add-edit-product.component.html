<app-navbar
  title="Product"
  [user]="merchant"
  [showBackButton]="true"
  userType="MERCHANT"
  backRoute="/merchant/inventory"
>
</app-navbar>

<div class="p-4 text-center bg-pink-500">
  <mat-card class="w-1/2 mx-auto">
    <mat-card-content>
      <form [formGroup]="productForm" (ngSubmit)="addProduct()">
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Description</mat-label>
          <textarea
            rows="3"
            matInput
            formControlName="description"
            required
          ></textarea>
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Category</mat-label>
          <input matInput formControlName="category" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Discount Price</mat-label>
          <input
            type="number"
            matInput
            formControlName="discountPrice"
            required
          />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Price</mat-label>
          <input type="number" matInput formControlName="price" required />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Stock</mat-label>
          <input type="number" matInput formControlName="quantity" required />
        </mat-form-field>
      </form>

      <div>
        <mat-carousel
          timings="250ms ease-in"
          [autoplay]="false"
          [interval]="5000"
          color="accent"
          maxWidth="auto"
          [proportion]="100"
          [slides]="previews.length"
          [loop]="true"
          [hideArrows]="false"
          [hideIndicators]="false"
          orientation="ltr"
          [maintainAspectRatio]="true"
        >
          <mat-carousel-slide
            #matCarouselSlide
            *ngFor="let slide of previews; let i = index"
            [image]="slide"
            overlayColor="#00000000"
            [hideOverlay]="false"
          ></mat-carousel-slide>
        </mat-carousel>

        <input
          class="p-2"
          type="file"
          id="fileInput"
          name="fileInput"
          accept="image/*"
          multiple
          max="3"
          (change)="selectFiles($event)"
        />
      </div>
    </mat-card-content>
  </mat-card>
</div>

<div class="flex justify-center p-4">
  <button
    [disabled]="productForm.invalid"
    color="accent"
    mat-raised-button
    (click)="!!productId ? updateProduct() : addProduct()"
  >
    {{ !!productId ? "Update Product" : "Add Product" }}
  </button>
</div>
